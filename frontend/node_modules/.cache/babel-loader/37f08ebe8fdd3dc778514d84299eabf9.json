{"ast":null,"code":"var _jsxFileName = \"C:\\\\D\\\\AI_role\\\\Accompany_women\\\\frontend\\\\src\\\\pages\\\\Chat.tsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Box, Paper, TextField, IconButton, Typography, keyframes, createTheme, Collapse, CircularProgress, Avatar } from '@mui/material';\nimport { Send as SendIcon, Mic as MicIcon, VolumeUp as VolumeUpIcon, ExpandMore as ExpandMoreIcon, ExpandLess as ExpandLessIcon, MusicNote as MusicNoteIcon, PlayArrow as PlayArrowIcon, DeleteSweep as DeleteSweepIcon, MoreVert as MoreVertIcon } from '@mui/icons-material';\n\n// 定义深色主题\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    background: {\n      default: '#000000',\n      paper: 'rgba(32, 32, 32, 0.8)'\n    },\n    text: {\n      primary: '#ffffff',\n      secondary: 'rgba(255, 255, 255, 0.7)'\n    }\n  }\n});\n\n// 定义气泡动画\nconst bubbleAppear = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\nconst Chat = () => {\n  const {\n    characterId\n  } = useParams();\n  const [showMessages, setShowMessages] = useState(true);\n  const [isIntroExpanded, setIsIntroExpanded] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(null);\n  const [characterInfo] = useState({\n    id: '1',\n    name: '罗峻雪',\n    avatar: '/images/characters/ceo.jpg',\n    introduction: '极为顽劣的财阀小少爷,少年细腰,雪发花眸,有一半的日耳曼血统,小名schlanke Schöne.(细腰美人)',\n    backgroundStory: '一度想把自己的名字改为罗素腰,但是被母亲强烈反对...',\n    height: '188cm',\n    age: 27,\n    connections: 794000,\n    openingMessage: {\n      content: '你这个可爱的小野猫',\n      sceneDescription: '（纸醉金迷,素手执杯,纸牌骰子,冰冷的珠宝映着富贵浮华的颜色,水蛇般的身躯慵懒倚靠）',\n      actionDescription: '（少年半靠在沙发里，身边簇拥着一群男生，有人喝酒有人递烟，他低着头把玩着长链手机，睫毛颤颤的，樱花色的薄唇被酒液浸润，透着一股无辜的艳色）'\n    }\n  });\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\n  const messagesEndRef = useRef(null);\n  const characterImageRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    // Add opening message and example responses when component mounts\n    setMessages([{\n      id: 1,\n      content: characterInfo.openingMessage.content,\n      sceneDescription: characterInfo.openingMessage.sceneDescription,\n      actionDescription: characterInfo.openingMessage.actionDescription,\n      sender: 'character',\n      timestamp: new Date()\n    }, {\n      id: 2,\n      content: \"你好呀~\",\n      sender: 'user',\n      timestamp: new Date()\n    }, {\n      id: 3,\n      content: \"哦？这不是我们可爱的小客人吗\",\n      sceneDescription: \"（抬起头来，露出一个慵懒而迷人的微笑，手指轻轻敲击着高脚杯）\",\n      actionDescription: \"（将手机放在一旁，示意身边的人群稍稍退开，为你留出一个位置）\",\n      sender: 'character',\n      timestamp: new Date()\n    }, {\n      id: 4,\n      content: \"我可以坐在这里吗？\",\n      sender: 'user',\n      timestamp: new Date()\n    }, {\n      id: 5,\n      content: \"当然可以，我可爱的小猫咪。这个位置，我可是特意为你留的呢\",\n      sceneDescription: \"（水晶吊灯的光芒在他银色的发丝间流转，映照出一片梦幻般的光晕）\",\n      actionDescription: \"（优雅地挪了挪位置，修长的手指轻拍身边的沙发座位，嘴角勾起一抹意味深长的笑）\",\n      sender: 'character',\n      timestamp: new Date()\n    }]);\n  }, [characterInfo]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleSendMessage = () => {\n    if (!inputMessage.trim()) return;\n    const newMessage = {\n      id: Date.now(),\n      content: inputMessage,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, newMessage]);\n    setInputMessage('');\n  };\n  const handleKeyPress = event => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handlePlayVoice = async messageId => {\n    // 更新消息的加载状态\n    setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n      ...msg,\n      isVoiceLoading: true\n    } : msg));\n    try {\n      // TODO: 在这里调用语音合成API\n      await new Promise(resolve => setTimeout(resolve, 2000)); // 模拟API调用\n\n      // 语音合成完成后，移除加载状态\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        isVoiceLoading: false\n      } : msg));\n    } catch (error) {\n      console.error('语音合成失败:', error);\n      // 发生错误时也要移除加载状态\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        isVoiceLoading: false\n      } : msg));\n    }\n  };\n\n  // 截断文本的函数\n  const truncateText = (text, maxLength) => {\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n  return /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      height: '100vh',\n      width: '100%',\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundImage: `url(${characterInfo.avatar})`,\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n      opacity: 0.6,\n      '&::after': {\n        content: '\"\"',\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        bottom: 0,\n        height: '50%',\n        background: 'linear-gradient(to bottom, transparent, rgba(0,0,0,0.8))'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: '12px 16px',\n      height: '64px',\n      backdropFilter: 'blur(10px)',\n      backgroundColor: 'rgba(0,0,0,0.3)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: characterInfo.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    sx: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }\n  }, characterInfo.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    sx: {\n      color: 'grey.400'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  }, (characterInfo.connections / 10000).toFixed(1), \"\\u4E07 \\u8FDE\\u63A5\\u8005\"))), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setShowMessages(!showMessages),\n    sx: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 11\n    }\n  }, showMessages ? /*#__PURE__*/React.createElement(ExpandLessIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 50\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => {/* TODO: 实现清除聊天功能 */},\n    sx: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DeleteSweepIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => {/* TODO: 实现打开菜单功能 */},\n    sx: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MoreVertIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'relative',\n      height: '60vh',\n      overflowY: 'auto',\n      overflowX: 'hidden',\n      '&::-webkit-scrollbar': {\n        display: 'none'\n      },\n      scrollbarWidth: 'none',\n      msOverflowStyle: 'none',\n      padding: '16px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    in: showMessages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      maxHeight: 'calc(100vh - 180px)',\n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      px: 2,\n      py: 3,\n      gap: 3 // 气泡之间的间距\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      p: 2,\n      bgcolor: 'rgba(32, 32, 32, 0.75)',\n      borderRadius: 2,\n      backdropFilter: 'blur(10px)',\n      width: '70%',\n      // 统一气泡宽度\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    sx: {\n      mb: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }, isIntroExpanded ? characterInfo.introduction : truncateText(characterInfo.introduction, 50)), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 1,\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MusicNoteIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      fontStyle: 'italic'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 17\n    }\n  }, isIntroExpanded ? characterInfo.backgroundStory : truncateText(characterInfo.backgroundStory, 50))), /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => setIsIntroExpanded(!isIntroExpanded),\n    sx: {\n      position: 'absolute',\n      right: 8,\n      bottom: 8,\n      bgcolor: 'rgba(0, 0, 0, 0.2)',\n      '&:hover': {\n        bgcolor: 'rgba(0, 0, 0, 0.4)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 15\n    }\n  }, isIntroExpanded ? /*#__PURE__*/React.createElement(ExpandLessIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 36\n    }\n  }) : /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 57\n    }\n  }))), messages.map(message => /*#__PURE__*/React.createElement(Box, {\n    key: message.id,\n    sx: {\n      display: 'flex',\n      justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\n      mb: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'flex-end',\n      gap: 1,\n      width: '70%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 17\n    }\n  }, message.sender === 'character' && /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => handlePlayVoice(message.id),\n    sx: {\n      position: 'absolute',\n      left: -40,\n      bottom: 0,\n      bgcolor: 'rgba(0, 0, 0, 0.2)',\n      '&:hover': {\n        bgcolor: 'rgba(0, 0, 0, 0.4)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(PlayArrowIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 25\n    }\n  }), isPlaying === message.id && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    sx: {\n      position: 'absolute',\n      left: -20,\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 27\n    }\n  }, \"3\\\"\"))), /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      p: 2,\n      bgcolor: message.sender === 'user' ? 'rgba(245, 235, 224, 0.75)' : 'rgba(32, 32, 32, 0.75)',\n      borderRadius: 2,\n      backdropFilter: 'blur(10px)',\n      boxShadow: '0 2px 12px rgba(0,0,0,0.1)',\n      width: '100%',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 19\n    }\n  }, message.sender === 'character' && /*#__PURE__*/React.createElement(React.Fragment, null, message.sceneDescription && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      color: 'text.secondary',\n      fontStyle: 'italic',\n      mb: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 27\n    }\n  }, message.sceneDescription), message.actionDescription && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      color: 'text.secondary',\n      fontStyle: 'italic',\n      mb: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 27\n    }\n  }, message.actionDescription), /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => handlePlayVoice(message.id),\n    disabled: message.isVoiceLoading,\n    sx: {\n      position: 'absolute',\n      right: 8,\n      top: 8,\n      bgcolor: 'rgba(255, 255, 255, 0.1)',\n      '&:hover': {\n        bgcolor: 'rgba(255, 255, 255, 0.2)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 25\n    }\n  }, message.isVoiceLoading ? /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 20,\n    thickness: 4,\n    sx: {\n      color: 'rgba(255, 255, 255, 0.7)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(VolumeUpIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    sx: {\n      color: message.sender === 'user' ? '#333333' : 'text.primary',\n      pr: message.sender === 'character' ? 4 : 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 21\n    }\n  }, message.content))))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'fixed',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      padding: '16px',\n      backdropFilter: 'blur(10px)',\n      backgroundColor: 'rgba(0,0,0,0.3)',\n      borderTop: '1px solid rgba(255,255,255,0.1)',\n      marginBottom: '56px' // Leave space for bottom navigation\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      gap: 1,\n      alignItems: 'flex-end'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    sx: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MicIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(TextField, {\n    multiline: true,\n    maxRows: 4,\n    placeholder: \"\\u53D1\\u9001\\u6D88\\u606F\\u7ED9\\u6E29\\u67D4\\u603B\\u88C1\",\n    value: inputMessage,\n    onChange: e => setInputMessage(e.target.value),\n    onKeyDown: handleKeyPress,\n    fullWidth: true,\n    sx: {\n      '& .MuiInputBase-root': {\n        backgroundColor: 'rgba(255,255,255,0.1)',\n        borderRadius: 2,\n        color: 'white'\n      },\n      '& .MuiOutlinedInput-notchedOutline': {\n        borderColor: 'rgba(255,255,255,0.2)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleSendMessage,\n    disabled: !inputMessage.trim(),\n    sx: {\n      color: 'white',\n      opacity: !inputMessage.trim() ? 0.5 : 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 13\n    }\n  })))));\n};\nexport default Chat;","map":{"version":3,"names":["React","useState","useRef","useEffect","useParams","Box","Paper","TextField","IconButton","Typography","keyframes","createTheme","Collapse","CircularProgress","Avatar","Send","SendIcon","Mic","MicIcon","VolumeUp","VolumeUpIcon","ExpandMore","ExpandMoreIcon","ExpandLess","ExpandLessIcon","MusicNote","MusicNoteIcon","PlayArrow","PlayArrowIcon","DeleteSweep","DeleteSweepIcon","MoreVert","MoreVertIcon","darkTheme","palette","mode","background","default","paper","text","primary","secondary","bubbleAppear","Chat","characterId","showMessages","setShowMessages","isIntroExpanded","setIsIntroExpanded","isPlaying","setIsPlaying","characterInfo","id","name","avatar","introduction","backgroundStory","height","age","connections","openingMessage","content","sceneDescription","actionDescription","messages","setMessages","inputMessage","setInputMessage","isVoiceEnabled","setIsVoiceEnabled","messagesEndRef","characterImageRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sender","timestamp","Date","handleSendMessage","trim","newMessage","now","prev","handleKeyPress","event","key","shiftKey","preventDefault","handlePlayVoice","messageId","prevMessages","map","msg","isVoiceLoading","Promise","resolve","setTimeout","error","console","truncateText","maxLength","length","slice","createElement","sx","width","position","display","flexDirection","overflow","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","top","left","right","bottom","backgroundImage","backgroundSize","backgroundPosition","opacity","alignItems","justifyContent","padding","backdropFilter","backgroundColor","gap","src","variant","color","toFixed","onClick","overflowY","overflowX","scrollbarWidth","msOverflowStyle","in","maxHeight","px","py","p","bgcolor","borderRadius","mb","fontSize","fontStyle","size","message","boxShadow","Fragment","disabled","thickness","pr","ref","borderTop","marginBottom","multiline","maxRows","placeholder","value","onChange","e","target","onKeyDown","fullWidth","borderColor"],"sources":["C:/D/AI_role/Accompany_women/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {\n  Box,\n  Paper,\n  TextField,\n  IconButton,\n  Typography,\n  Tooltip,\n  keyframes,\n  createTheme,\n  ThemeProvider,\n  Collapse,\n  Zoom,\n  CircularProgress,\n  Avatar,\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  Mic as MicIcon,\n  Search as SearchIcon,\n  Menu as MenuIcon,\n  Add as AddIcon,\n  VolumeUp as VolumeUpIcon,\n  VolumeOff as VolumeOffIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  MusicNote as MusicNoteIcon,\n  ZoomIn as ZoomInIcon,\n  ZoomOut as ZoomOutIcon,\n  PlayArrow as PlayArrowIcon,\n  Call as CallIcon,\n  DeleteSweep as DeleteSweepIcon,\n  MoreVert as MoreVertIcon,\n} from '@mui/icons-material';\n\n// 定义深色主题\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    background: {\n      default: '#000000',\n      paper: 'rgba(32, 32, 32, 0.8)',\n    },\n    text: {\n      primary: '#ffffff',\n      secondary: 'rgba(255, 255, 255, 0.7)',\n    },\n  },\n});\n\n// 定义气泡动画\nconst bubbleAppear = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\ninterface Message {\n  id: number;\n  content: string;\n  sceneDescription?: string;\n  actionDescription?: string;\n  sender: 'user' | 'character';\n  timestamp: Date;\n  isVoiceLoading?: boolean;\n}\n\ninterface CharacterInfo {\n  id: string;\n  name: string;\n  avatar: string;\n  introduction: string;\n  backgroundStory: string;\n  height: string;\n  age: number;\n  connections: number;\n  openingMessage: {\n    content: string;\n    sceneDescription?: string;\n    actionDescription?: string;\n  };\n}\n\nconst Chat: React.FC = () => {\n  const { characterId } = useParams<{ characterId: string }>();\n  const [showMessages, setShowMessages] = useState(true);\n  const [isIntroExpanded, setIsIntroExpanded] = useState(false);\n  const [isPlaying, setIsPlaying] = useState<number | null>(null);\n  const [characterInfo] = useState<CharacterInfo>({\n    id: '1',\n    name: '罗峻雪',\n    avatar: '/images/characters/ceo.jpg',\n    introduction: '极为顽劣的财阀小少爷,少年细腰,雪发花眸,有一半的日耳曼血统,小名schlanke Schöne.(细腰美人)',\n    backgroundStory: '一度想把自己的名字改为罗素腰,但是被母亲强烈反对...',\n    height: '188cm',\n    age: 27,\n    connections: 794000,\n    openingMessage: {\n      content: '你这个可爱的小野猫',\n      sceneDescription: '（纸醉金迷,素手执杯,纸牌骰子,冰冷的珠宝映着富贵浮华的颜色,水蛇般的身躯慵懒倚靠）',\n      actionDescription: '（少年半靠在沙发里，身边簇拥着一群男生，有人喝酒有人递烟，他低着头把玩着长链手机，睫毛颤颤的，樱花色的薄唇被酒液浸润，透着一股无辜的艳色）',\n    }\n  });\n  \n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const characterImageRef = useRef<HTMLImageElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    // Add opening message and example responses when component mounts\n    setMessages([\n      {\n        id: 1,\n        content: characterInfo.openingMessage.content,\n        sceneDescription: characterInfo.openingMessage.sceneDescription,\n        actionDescription: characterInfo.openingMessage.actionDescription,\n        sender: 'character',\n        timestamp: new Date(),\n      },\n      {\n        id: 2,\n        content: \"你好呀~\",\n        sender: 'user',\n        timestamp: new Date(),\n      },\n      {\n        id: 3,\n        content: \"哦？这不是我们可爱的小客人吗\",\n        sceneDescription: \"（抬起头来，露出一个慵懒而迷人的微笑，手指轻轻敲击着高脚杯）\",\n        actionDescription: \"（将手机放在一旁，示意身边的人群稍稍退开，为你留出一个位置）\",\n        sender: 'character',\n        timestamp: new Date(),\n      },\n      {\n        id: 4,\n        content: \"我可以坐在这里吗？\",\n        sender: 'user',\n        timestamp: new Date(),\n      },\n      {\n        id: 5,\n        content: \"当然可以，我可爱的小猫咪。这个位置，我可是特意为你留的呢\",\n        sceneDescription: \"（水晶吊灯的光芒在他银色的发丝间流转，映照出一片梦幻般的光晕）\",\n        actionDescription: \"（优雅地挪了挪位置，修长的手指轻拍身边的沙发座位，嘴角勾起一抹意味深长的笑）\",\n        sender: 'character',\n        timestamp: new Date(),\n      }\n    ]);\n  }, [characterInfo]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = () => {\n    if (!inputMessage.trim()) return;\n\n    const newMessage: Message = {\n      id: Date.now(),\n      content: inputMessage,\n      sender: 'user',\n      timestamp: new Date(),\n    };\n\n    setMessages((prev) => [...prev, newMessage]);\n    setInputMessage('');\n  };\n\n  const handleKeyPress = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handlePlayVoice = async (messageId: number) => {\n    // 更新消息的加载状态\n    setMessages(prevMessages => \n      prevMessages.map(msg => \n        msg.id === messageId \n          ? { ...msg, isVoiceLoading: true }\n          : msg\n      )\n    );\n\n    try {\n      // TODO: 在这里调用语音合成API\n      await new Promise(resolve => setTimeout(resolve, 2000)); // 模拟API调用\n      \n      // 语音合成完成后，移除加载状态\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { ...msg, isVoiceLoading: false }\n            : msg\n        )\n      );\n    } catch (error) {\n      console.error('语音合成失败:', error);\n      // 发生错误时也要移除加载状态\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { ...msg, isVoiceLoading: false }\n            : msg\n        )\n      );\n    }\n  };\n\n  // 截断文本的函数\n  const truncateText = (text: string, maxLength: number) => {\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n\n  return (\n    <Box\n      sx={{\n        height: '100vh',\n        width: '100%',\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Background Image with Gradient */}\n      <Box\n        sx={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundImage: `url(${characterInfo.avatar})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          opacity: 0.6,\n          '&::after': {\n            content: '\"\"',\n            position: 'absolute',\n            left: 0,\n            right: 0,\n            bottom: 0,\n            height: '50%',\n            background: 'linear-gradient(to bottom, transparent, rgba(0,0,0,0.8))',\n          },\n        }}\n      />\n\n      {/* Top Bar */}\n      <Box\n        sx={{\n          position: 'relative',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          padding: '12px 16px',\n          height: '64px',\n          backdropFilter: 'blur(10px)',\n          backgroundColor: 'rgba(0,0,0,0.3)',\n        }}\n      >\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <Avatar src={characterInfo.avatar} />\n          <Box>\n            <Typography variant=\"subtitle1\" sx={{ color: 'white' }}>\n              {characterInfo.name}\n            </Typography>\n            <Typography variant=\"caption\" sx={{ color: 'grey.400' }}>\n              {(characterInfo.connections / 10000).toFixed(1)}万 连接者\n            </Typography>\n          </Box>\n        </Box>\n        <Box>\n          <IconButton onClick={() => setShowMessages(!showMessages)} sx={{ color: 'white' }}>\n            {showMessages ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n          </IconButton>\n          <IconButton onClick={() => {/* TODO: 实现清除聊天功能 */}} sx={{ color: 'white' }}>\n            <DeleteSweepIcon />\n          </IconButton>\n          <IconButton onClick={() => {/* TODO: 实现打开菜单功能 */}} sx={{ color: 'white' }}>\n            <MoreVertIcon />\n          </IconButton>\n        </Box>\n      </Box>\n\n      {/* Message Area */}\n      <Box\n        sx={{\n          position: 'relative',\n          height: '60vh',\n          overflowY: 'auto',\n          overflowX: 'hidden',\n          '&::-webkit-scrollbar': {\n            display: 'none',\n          },\n          scrollbarWidth: 'none',\n          msOverflowStyle: 'none',\n          padding: '16px',\n        }}\n      >\n        {/* 消息列表 - 可收起 */}\n        <Collapse in={showMessages}>\n          <Box\n            sx={{\n              maxHeight: 'calc(100vh - 180px)',\n              overflow: 'auto',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'flex-start',\n              px: 2,\n              py: 3,\n              gap: 3, // 气泡之间的间距\n            }}\n          >\n            {/* 角色简介卡片 */}\n            <Paper\n              sx={{\n                p: 2,\n                bgcolor: 'rgba(32, 32, 32, 0.75)',\n                borderRadius: 2,\n                backdropFilter: 'blur(10px)',\n                width: '70%', // 统一气泡宽度\n                position: 'relative',\n              }}\n            >\n              <Typography variant=\"body1\" sx={{ mb: 1 }}>\n                {isIntroExpanded \n                  ? characterInfo.introduction \n                  : truncateText(characterInfo.introduction, 50)}\n              </Typography>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, color: 'text.secondary' }}>\n                <MusicNoteIcon fontSize=\"small\" />\n                <Typography variant=\"body2\" sx={{ fontStyle: 'italic' }}>\n                  {isIntroExpanded \n                    ? characterInfo.backgroundStory \n                    : truncateText(characterInfo.backgroundStory, 50)}\n                </Typography>\n              </Box>\n              <IconButton \n                size=\"small\"\n                onClick={() => setIsIntroExpanded(!isIntroExpanded)}\n                sx={{\n                  position: 'absolute',\n                  right: 8,\n                  bottom: 8,\n                  bgcolor: 'rgba(0, 0, 0, 0.2)',\n                  '&:hover': {\n                    bgcolor: 'rgba(0, 0, 0, 0.4)',\n                  },\n                }}\n              >\n                {isIntroExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n              </IconButton>\n            </Paper>\n\n            {messages.map((message) => (\n              <Box\n                key={message.id}\n                sx={{\n                  display: 'flex',\n                  justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\n                  mb: 2,\n                }}\n              >\n                <Box\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'flex-end',\n                    gap: 1,\n                    width: '70%',\n                  }}\n                >\n                  {message.sender === 'character' && (\n                    <Box sx={{ position: 'relative' }}>\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handlePlayVoice(message.id)}\n                        sx={{\n                          position: 'absolute',\n                          left: -40,\n                          bottom: 0,\n                          bgcolor: 'rgba(0, 0, 0, 0.2)',\n                          '&:hover': {\n                            bgcolor: 'rgba(0, 0, 0, 0.4)',\n                          },\n                        }}\n                      >\n                        <PlayArrowIcon fontSize=\"small\" />\n                        {isPlaying === message.id && (\n                          <Typography\n                            variant=\"caption\"\n                            sx={{\n                              position: 'absolute',\n                              left: -20,\n                              color: 'text.secondary',\n                            }}\n                          >\n                            3\"\n                          </Typography>\n                        )}\n                      </IconButton>\n                    </Box>\n                  )}\n                  <Paper\n                    sx={{\n                      p: 2,\n                      bgcolor: message.sender === 'user' ? 'rgba(245, 235, 224, 0.75)' : 'rgba(32, 32, 32, 0.75)',\n                      borderRadius: 2,\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 2px 12px rgba(0,0,0,0.1)',\n                      width: '100%',\n                      position: 'relative',\n                    }}\n                  >\n                    {message.sender === 'character' && (\n                      <>\n                        {message.sceneDescription && (\n                          <Typography\n                            variant=\"body2\"\n                            sx={{\n                              color: 'text.secondary',\n                              fontStyle: 'italic',\n                              mb: 1,\n                            }}\n                          >\n                            {message.sceneDescription}\n                          </Typography>\n                        )}\n                        {message.actionDescription && (\n                          <Typography\n                            variant=\"body2\"\n                            sx={{\n                              color: 'text.secondary',\n                              fontStyle: 'italic',\n                              mb: 1,\n                            }}\n                          >\n                            {message.actionDescription}\n                          </Typography>\n                        )}\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handlePlayVoice(message.id)}\n                          disabled={message.isVoiceLoading}\n                          sx={{\n                            position: 'absolute',\n                            right: 8,\n                            top: 8,\n                            bgcolor: 'rgba(255, 255, 255, 0.1)',\n                            '&:hover': {\n                              bgcolor: 'rgba(255, 255, 255, 0.2)',\n                            },\n                          }}\n                        >\n                          {message.isVoiceLoading ? (\n                            <CircularProgress size={20} thickness={4} sx={{ color: 'rgba(255, 255, 255, 0.7)' }} />\n                          ) : (\n                            <VolumeUpIcon fontSize=\"small\" />\n                          )}\n                        </IconButton>\n                      </>\n                    )}\n                    <Typography \n                      variant=\"body1\" \n                      sx={{\n                        color: message.sender === 'user' ? '#333333' : 'text.primary',\n                        pr: message.sender === 'character' ? 4 : 0,\n                      }}\n                    >\n                      {message.content}\n                    </Typography>\n                  </Paper>\n                </Box>\n              </Box>\n            ))}\n            <div ref={messagesEndRef} />\n          </Box>\n        </Collapse>\n      </Box>\n\n      {/* Input Area */}\n      <Box\n        sx={{\n          position: 'fixed',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          padding: '16px',\n          backdropFilter: 'blur(10px)',\n          backgroundColor: 'rgba(0,0,0,0.3)',\n          borderTop: '1px solid rgba(255,255,255,0.1)',\n          marginBottom: '56px', // Leave space for bottom navigation\n        }}\n      >\n        <Box sx={{ display: 'flex', gap: 1, alignItems: 'flex-end' }}>\n          <IconButton sx={{ color: 'white' }}>\n            <MicIcon />\n          </IconButton>\n          <TextField\n            multiline\n            maxRows={4}\n            placeholder=\"发送消息给温柔总裁\"\n            value={inputMessage}\n            onChange={(e) => setInputMessage(e.target.value)}\n            onKeyDown={handleKeyPress}\n            fullWidth\n            sx={{\n              '& .MuiInputBase-root': {\n                backgroundColor: 'rgba(255,255,255,0.1)',\n                borderRadius: 2,\n                color: 'white',\n              },\n              '& .MuiOutlinedInput-notchedOutline': {\n                borderColor: 'rgba(255,255,255,0.2)',\n              },\n            }}\n          />\n          <IconButton \n            onClick={handleSendMessage}\n            disabled={!inputMessage.trim()}\n            sx={{ \n              color: 'white',\n              opacity: !inputMessage.trim() ? 0.5 : 1 \n            }}\n          >\n            <SendIcon />\n          </IconButton>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Chat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}