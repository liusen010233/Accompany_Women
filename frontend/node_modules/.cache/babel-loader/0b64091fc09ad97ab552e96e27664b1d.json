{"ast":null,"code":"var _jsxFileName = \"C:\\\\D\\\\AI_role\\\\Accompany_women\\\\frontend\\\\src\\\\pages\\\\Chat.tsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Box, Paper, TextField, IconButton, Typography, keyframes, createTheme, ThemeProvider, Collapse, CircularProgress, Menu, MenuItem, ListSubheader, Divider, Switch, Slider, Dialog, DialogTitle, DialogContent, DialogActions, Button } from '@mui/material';\nimport { Send as SendIcon, Mic as MicIcon, Menu as MenuIcon, VolumeUp as VolumeUpIcon, ExpandMore as ExpandMoreIcon, ExpandLess as ExpandLessIcon, MusicNote as MusicNoteIcon, PlayArrow as PlayArrowIcon, Call as CallIcon, Person as PersonIcon, Image as ImageIcon, VolumeDown as VolumeDownIcon } from '@mui/icons-material';\n\n// 定义深色主题\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    background: {\n      default: '#000000',\n      paper: 'rgba(32, 32, 32, 0.8)'\n    },\n    text: {\n      primary: '#ffffff',\n      secondary: 'rgba(255, 255, 255, 0.7)'\n    }\n  }\n});\n\n// 定义气泡动画\nconst bubbleAppear = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\nconst Chat = () => {\n  const {\n    characterId\n  } = useParams();\n  const [showMessages, setShowMessages] = useState(true);\n  const [isIntroExpanded, setIsIntroExpanded] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(null);\n  const [isMusicEnabled, setIsMusicEnabled] = useState(true);\n  const [characterInfo] = useState({\n    id: '1',\n    name: '罗峻雪',\n    avatar: '/images/characters/ceo.jpg',\n    introduction: '极为顽劣的财阀小少爷,少年细腰,雪发花眸,有一半的日耳曼血统,小名schlanke Schöne.(细腰美人)',\n    backgroundStory: '一度想把自己的名字改为罗素腰,但是被母亲强烈反对...',\n    height: '188cm',\n    age: 27,\n    connections: 794000,\n    openingMessage: {\n      content: '你这个可爱的小野猫',\n      sceneDescription: '（纸醉金迷,素手执杯,纸牌骰子,冰冷的珠宝映着富贵浮华的颜色,水蛇般的身躯慵懒倚靠）',\n      actionDescription: '（少年半靠在沙发里，身边簇拥着一群男生，有人喝酒有人递烟，他低着头把玩着长链手机，睫毛颤颤的，樱花色的薄唇被酒液浸润，透着一股无辜的艳色）'\n    }\n  });\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\n  const messagesEndRef = useRef(null);\n  const characterImageRef = useRef(null);\n  const [playingMessageId, setPlayingMessageId] = useState(null);\n  const messagesContainerRef = useRef(null);\n  const [isNearBottom, setIsNearBottom] = useState(true);\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const userScrollTimeoutRef = useRef();\n  const [isVoicePlaying, setIsVoicePlaying] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [autoPlayVoice, setAutoPlayVoice] = useState(false);\n  const [bgMusicVolume, setBgMusicVolume] = useState(50);\n  const [userSettings, setUserSettings] = useState({\n    nickname: '小客人',\n    gender: '女',\n    identity: '普通访客'\n  });\n  const [isEditingUserSettings, setIsEditingUserSettings] = useState(false);\n  const [tempUserSettings, setTempUserSettings] = useState(userSettings);\n  const checkIfNearBottom = () => {\n    const container = messagesContainerRef.current;\n    if (container) {\n      const {\n        scrollHeight,\n        scrollTop,\n        clientHeight\n      } = container;\n      const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\n      setIsNearBottom(distanceFromBottom < 500);\n    }\n  };\n  const handleUserScroll = () => {\n    setIsUserScrolling(true);\n\n    // Clear any existing timeout\n    if (userScrollTimeoutRef.current) {\n      clearTimeout(userScrollTimeoutRef.current);\n    }\n\n    // Reset the user scrolling state after 150ms of no scroll events\n    userScrollTimeoutRef.current = setTimeout(() => {\n      setIsUserScrolling(false);\n    }, 150);\n    checkIfNearBottom();\n  };\n  const scrollToBottom = () => {\n    // 只有在不是播放语音的情况下，且在底部500px范围内时才自动滚动\n    if (isNearBottom && !isVoicePlaying) {\n      var _messagesEndRef$curre;\n      (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  };\n\n  // 监听消息区域的滚动事件\n  useEffect(() => {\n    const container = messagesContainerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleUserScroll);\n      return () => {\n        container.removeEventListener('scroll', handleUserScroll);\n        if (userScrollTimeoutRef.current) {\n          clearTimeout(userScrollTimeoutRef.current);\n        }\n      };\n    }\n  }, []);\n\n  // 监听消息变化\n  useEffect(() => {\n    if (messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n      // 只在新消息（非语音状态更新）时检查是否需要滚动\n      if (!lastMessage.isVoiceLoading) {\n        scrollToBottom();\n      }\n    }\n  }, [messages, isNearBottom]);\n  useEffect(() => {\n    // Add opening message and example responses when component mounts\n    setMessages([{\n      id: 1,\n      content: characterInfo.openingMessage.content,\n      sceneDescription: characterInfo.openingMessage.sceneDescription,\n      actionDescription: characterInfo.openingMessage.actionDescription,\n      sender: 'character',\n      timestamp: new Date()\n    }, {\n      id: 2,\n      content: \"你好呀~\",\n      sender: 'user',\n      timestamp: new Date()\n    }, {\n      id: 3,\n      content: \"哦？这不是我们可爱的小客人吗\",\n      sceneDescription: \"（抬起头来，露出一个慵懒而迷人的微笑，手指轻轻敲击着高脚杯）\",\n      actionDescription: \"（将手机放在一旁，示意身边的人群稍稍退开，为你留出一个位置）\",\n      sender: 'character',\n      timestamp: new Date()\n    }, {\n      id: 4,\n      content: \"我可以坐在这里吗？\",\n      sender: 'user',\n      timestamp: new Date()\n    }, {\n      id: 5,\n      content: \"当然可以，我可爱的小猫咪。这个位置，我可是特意为你留的呢\",\n      sceneDescription: \"（水晶吊灯的光芒在他银色的发丝间流转，映照出一片梦幻般的光晕）\",\n      actionDescription: \"（优雅地挪了挪位置，修长的手指轻拍身边的沙发座位，嘴角勾起一抹意味深长的笑）\",\n      sender: 'character',\n      timestamp: new Date()\n    }]);\n  }, [characterInfo]);\n  const handleKeyPress = event => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handleSendMessage = () => {\n    const messageContent = inputMessage.trim() || \"继续\";\n    const newMessage = {\n      id: Date.now(),\n      content: messageContent,\n      sender: 'user',\n      timestamp: new Date()\n    };\n\n    // 发送新消息时，重置语音播放状态\n    setIsVoicePlaying(false);\n    setMessages(prev => [...prev, newMessage]);\n    setInputMessage('');\n\n    // 模拟AI回复\n    setTimeout(() => {\n      const aiResponse = {\n        id: Date.now(),\n        content: \"这是AI的回复消息\",\n        sender: 'character',\n        timestamp: new Date(),\n        sceneDescription: \"（轻轻地笑了笑）\",\n        actionDescription: \"（优雅地端起酒杯，轻轻摇晃）\"\n      };\n      setMessages(prev => [...prev, aiResponse]);\n    }, 1000);\n  };\n  const handlePlayVoice = async messageId => {\n    // 设置正在播放语音状态，阻止自动滚动\n    setIsVoicePlaying(true);\n\n    // 如果正在播放这条消息，则取消播放\n    if (playingMessageId === messageId) {\n      setPlayingMessageId(null);\n      setIsVoicePlaying(false);\n      // TODO: 停止语音播放的逻辑\n      return;\n    }\n\n    // 如果这条消息正在加载中，不做任何操作\n    const currentMessage = messages.find(msg => msg.id === messageId);\n    if (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.isVoiceLoading) {\n      return;\n    }\n\n    // 更新消息的加载状态\n    setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n      ...msg,\n      isVoiceLoading: true\n    } : msg));\n    try {\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        isVoiceLoading: false\n      } : msg));\n      setPlayingMessageId(messageId);\n\n      // 5秒后重置播放状态\n      setTimeout(() => {\n        setPlayingMessageId(null);\n        setIsVoicePlaying(false);\n      }, 5000);\n    } catch (error) {\n      console.error('语音合成失败:', error);\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === messageId ? {\n        ...msg,\n        isVoiceLoading: false\n      } : msg));\n      setPlayingMessageId(null);\n      setIsVoicePlaying(false);\n    }\n  };\n\n  // 截断文本的函数\n  const truncateText = (text, maxLength) => {\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n  const handleMenuClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n  const handleOpenUserSettings = () => {\n    setTempUserSettings(userSettings);\n    setIsEditingUserSettings(true);\n    handleMenuClose();\n  };\n  const handleSaveUserSettings = () => {\n    setUserSettings(tempUserSettings);\n    setIsEditingUserSettings(false);\n  };\n  const handleVolumeChange = (event, newValue) => {\n    setBgMusicVolume(newValue);\n  };\n  const handleChangeBg = () => {\n    // TODO: 实现更换背景图片功能\n    handleMenuClose();\n  };\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: darkTheme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      height: '100vh',\n      width: '100%',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      paddingBottom: '56px' // 为底部导航栏预留空间\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      p: 2,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      backdropFilter: 'blur(10px)',\n      bgcolor: 'rgba(0, 0, 0, 0.3)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"img\",\n    src: characterInfo.avatar,\n    sx: {\n      width: 40,\n      height: 40,\n      borderRadius: '50%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 15\n    }\n  }, characterInfo.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    sx: {\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 15\n    }\n  }, (characterInfo.connections / 10000).toFixed(1), \"\\u4E07 \\u8FDE\\u63A5\\u8005\"))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      gap: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setShowMessages(!showMessages),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 13\n    }\n  }, showMessages ? /*#__PURE__*/React.createElement(ExpandLessIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 31\n    }\n  }) : /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 52\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setIsMusicEnabled(!isMusicEnabled),\n    sx: {\n      color: isMusicEnabled ? 'primary.main' : 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MusicNoteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleMenuClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleMenuClose,\n    PaperProps: {\n      sx: {\n        bgcolor: 'rgba(32, 32, 32, 0.95)',\n        backdropFilter: 'blur(10px)',\n        color: 'text.primary',\n        minWidth: 250\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListSubheader, {\n    sx: {\n      bgcolor: 'transparent',\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 11\n    }\n  }, \"\\u6211\\u7684\\u5BF9\\u8BDD\\u8BBE\\u5B9A\"), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleOpenUserSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PersonIcon, {\n    sx: {\n      mr: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 13\n    }\n  }, \"\\u4FEE\\u6539\\u5BF9\\u8BDD\\u8BBE\\u5B9A\")), /*#__PURE__*/React.createElement(Divider, {\n    sx: {\n      my: 1,\n      bgcolor: 'rgba(255, 255, 255, 0.1)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ListSubheader, {\n    sx: {\n      bgcolor: 'transparent',\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 11\n    }\n  }, \"\\u5BF9\\u8BDD\\u8BBE\\u7F6E\"), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleChangeBg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ImageIcon, {\n    sx: {\n      mr: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 13\n    }\n  }, \"\\u66F4\\u6539\\u80CC\\u666F\\u56FE\\u7247\")), /*#__PURE__*/React.createElement(Divider, {\n    sx: {\n      my: 1,\n      bgcolor: 'rgba(255, 255, 255, 0.1)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ListSubheader, {\n    sx: {\n      bgcolor: 'transparent',\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 11\n    }\n  }, \"\\u58F0\\u97F3\\u8BBE\\u7F6E\"), /*#__PURE__*/React.createElement(MenuItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 15\n    }\n  }, \"\\u81EA\\u52A8\\u64AD\\u653E\\u5BF9\\u8BDD\\u8BED\\u97F3\"), /*#__PURE__*/React.createElement(Switch, {\n    checked: autoPlayVoice,\n    onChange: e => setAutoPlayVoice(e.target.checked),\n    sx: {\n      ml: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(MenuItem, {\n    sx: {\n      flexDirection: 'column',\n      alignItems: 'stretch'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      mb: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(VolumeDownIcon, {\n    sx: {\n      mr: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 15\n    }\n  }, \"\\u80CC\\u666F\\u97F3\\u4E50\\u97F3\\u91CF\")), /*#__PURE__*/React.createElement(Slider, {\n    value: bgMusicVolume,\n    onChange: handleVolumeChange,\n    \"aria-label\": \"\\u80CC\\u666F\\u97F3\\u4E50\\u97F3\\u91CF\",\n    sx: {\n      width: '90%',\n      ml: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Dialog, {\n    open: isEditingUserSettings,\n    onClose: () => setIsEditingUserSettings(false),\n    PaperProps: {\n      sx: {\n        bgcolor: 'rgba(32, 32, 32, 0.95)',\n        backdropFilter: 'blur(10px)',\n        color: 'text.primary'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 11\n    }\n  }, \"\\u4FEE\\u6539\\u5BF9\\u8BDD\\u8BBE\\u5B9A\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 2,\n      pt: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: \"\\u79F0\\u547C\",\n    value: tempUserSettings.nickname,\n    onChange: e => setTempUserSettings(prev => ({\n      ...prev,\n      nickname: e.target.value\n    })),\n    fullWidth: true,\n    variant: \"outlined\",\n    helperText: \"\\u4ED6\\u5BF9\\u6211\\u7684\\u79F0\\u547C\",\n    sx: {\n      '& .MuiOutlinedInput-root': {\n        color: 'text.primary',\n        '& fieldset': {\n          borderColor: 'rgba(255, 255, 255, 0.23)'\n        }\n      },\n      '& .MuiInputLabel-root': {\n        color: 'text.secondary'\n      },\n      '& .MuiFormHelperText-root': {\n        color: 'text.secondary'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"\\u6027\\u522B\",\n    value: tempUserSettings.gender,\n    onChange: e => setTempUserSettings(prev => ({\n      ...prev,\n      gender: e.target.value\n    })),\n    fullWidth: true,\n    variant: \"outlined\",\n    helperText: \"\\u4ED6\\u5BF9\\u6211\\u7684\\u6027\\u522B\\u8BA4\\u77E5\",\n    sx: {\n      '& .MuiOutlinedInput-root': {\n        color: 'text.primary',\n        '& fieldset': {\n          borderColor: 'rgba(255, 255, 255, 0.23)'\n        }\n      },\n      '& .MuiInputLabel-root': {\n        color: 'text.secondary'\n      },\n      '& .MuiFormHelperText-root': {\n        color: 'text.secondary'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"\\u6211\\u662F\\u8C01\",\n    value: tempUserSettings.identity,\n    onChange: e => setTempUserSettings(prev => ({\n      ...prev,\n      identity: e.target.value\n    })),\n    fullWidth: true,\n    variant: \"outlined\",\n    helperText: \"\\u4ED6\\u5BF9\\u6211\\u7684\\u8EAB\\u4EFD\\u8BA4\\u77E5\",\n    multiline: true,\n    rows: 2,\n    sx: {\n      '& .MuiOutlinedInput-root': {\n        color: 'text.primary',\n        '& fieldset': {\n          borderColor: 'rgba(255, 255, 255, 0.23)'\n        }\n      },\n      '& .MuiInputLabel-root': {\n        color: 'text.secondary'\n      },\n      '& .MuiFormHelperText-root': {\n        color: 'text.secondary'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setIsEditingUserSettings(false),\n    sx: {\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 13\n    }\n  }, \"\\u53D6\\u6D88\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleSaveUserSettings,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 13\n    }\n  }, \"\\u4FDD\\u5B58\"))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    ref: messagesContainerRef,\n    sx: {\n      height: '50vh',\n      overflowY: 'auto',\n      overflowX: 'hidden',\n      '&::-webkit-scrollbar': {\n        display: 'none'\n      },\n      scrollbarWidth: 'none',\n      msOverflowStyle: 'none',\n      px: 2,\n      py: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    in: showMessages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      height: '100%',\n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      px: 2,\n      py: 3,\n      gap: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      p: 2,\n      bgcolor: 'rgba(32, 32, 32, 0.75)',\n      borderRadius: 2,\n      backdropFilter: 'blur(10px)',\n      width: '80%',\n      maxWidth: '600px',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      width: '95%',\n      height: isIntroExpanded ? 'auto' : '4.8em',\n      overflow: 'hidden',\n      transition: 'height 0.3s ease'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    sx: {\n      mb: 1,\n      fontWeight: 'bold',\n      color: 'text.primary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 19\n    }\n  }, \"\\u7B80\\u4ECB\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    sx: {\n      mb: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 19\n    }\n  }, characterInfo.introduction), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 1,\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MusicNoteIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      fontStyle: 'italic'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 21\n    }\n  }, characterInfo.backgroundStory))), /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => setIsIntroExpanded(!isIntroExpanded),\n    sx: {\n      position: 'absolute',\n      right: 8,\n      bottom: 8,\n      bgcolor: 'rgba(0, 0, 0, 0.2)',\n      '&:hover': {\n        bgcolor: 'rgba(0, 0, 0, 0.4)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 17\n    }\n  }, isIntroExpanded ? /*#__PURE__*/React.createElement(ExpandLessIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 38\n    }\n  }) : /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 59\n    }\n  }))), messages.map(message => /*#__PURE__*/React.createElement(Box, {\n    key: message.id,\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: message.sender === 'user' ? 'flex-end' : 'flex-start',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'flex-end',\n      gap: 1,\n      ...(message.sender === 'user' ? {\n        width: 'fit-content',\n        maxWidth: {\n          xs: '70%',\n          sm: '65%'\n        }\n      } : {\n        width: '80%',\n        maxWidth: '600px'\n      }),\n      ml: message.sender === 'user' ? 'auto' : 0,\n      mr: message.sender === 'user' ? 0 : 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 19\n    }\n  }, message.sender === 'character' && /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => handlePlayVoice(message.id),\n    sx: {\n      position: 'absolute',\n      left: -40,\n      bottom: 0,\n      bgcolor: 'rgba(0, 0, 0, 0.2)',\n      '&:hover': {\n        bgcolor: 'rgba(0, 0, 0, 0.4)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 714,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(PlayArrowIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 27\n    }\n  }), isPlaying === message.id && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    sx: {\n      position: 'absolute',\n      left: -20,\n      color: 'text.secondary'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 29\n    }\n  }, \"3\\\"\"))), /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      p: 2,\n      bgcolor: message.sender === 'user' ? 'rgba(245, 235, 224, 0.75)' : 'rgba(32, 32, 32, 0.75)',\n      borderRadius: 2,\n      backdropFilter: 'blur(10px)',\n      boxShadow: '0 2px 12px rgba(0,0,0,0.1)',\n      width: '100%',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 21\n    }\n  }, message.sender === 'character' && /*#__PURE__*/React.createElement(React.Fragment, null, message.sceneDescription && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      color: 'text.secondary',\n      fontStyle: 'italic',\n      mb: 1,\n      width: '95%',\n      textAlign: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 29\n    }\n  }, message.sceneDescription), message.actionDescription && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    sx: {\n      color: 'text.secondary',\n      fontStyle: 'italic',\n      mb: 1,\n      width: '95%',\n      textAlign: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 29\n    }\n  }, message.actionDescription), /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => handlePlayVoice(message.id),\n    disabled: message.isVoiceLoading,\n    sx: {\n      position: 'absolute',\n      right: 8,\n      top: 8,\n      bgcolor: 'rgba(255, 255, 255, 0.1)',\n      '&:hover': {\n        bgcolor: 'rgba(255, 255, 255, 0.2)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 784,\n      columnNumber: 27\n    }\n  }, message.isVoiceLoading ? /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 20,\n    thickness: 4,\n    sx: {\n      color: 'rgba(255, 255, 255, 0.7)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 799,\n      columnNumber: 31\n    }\n  }) : /*#__PURE__*/React.createElement(VolumeUpIcon, {\n    fontSize: \"small\",\n    sx: {\n      color: playingMessageId === message.id ? 'primary.main' : 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 31\n    }\n  }))), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    sx: {\n      color: message.sender === 'user' ? '#333333' : 'text.primary',\n      pr: message.sender === 'character' ? 4 : 0,\n      textAlign: 'left',\n      width: message.sender === 'character' ? '95%' : '100%',\n      minWidth: message.sender === 'user' ? '4em' : 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 811,\n      columnNumber: 23\n    }\n  }, message.content))))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      p: 2,\n      width: '100%',\n      backdropFilter: 'blur(10px)',\n      bgcolor: 'rgba(0, 0, 0, 0.3)',\n      borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n      position: 'relative',\n      zIndex: 1200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 833,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"form\",\n    onSubmit: e => {\n      e.preventDefault();\n      handleSendMessage();\n    },\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 1,\n      bgcolor: 'rgba(32, 32, 32, 0.5)',\n      borderRadius: 2,\n      p: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    sx: {\n      color: 'text.secondary'\n    },\n    onClick: () => {/* TODO: 实现语音通话功能 */},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 859,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CallIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 863,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    multiline: true,\n    maxRows: 4,\n    value: inputMessage,\n    onChange: e => setInputMessage(e.target.value),\n    onKeyPress: handleKeyPress,\n    placeholder: \"\\u53D1\\u9001\\u6D88\\u606F\\u7ED9\\u6E29\\u67D4\\u603B\\u88C1\",\n    variant: \"standard\",\n    sx: {\n      '& .MuiInputBase-root': {\n        color: 'text.primary',\n        '&::before, &::after': {\n          display: 'none'\n        }\n      },\n      '& .MuiInputBase-input': {\n        p: 1\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 865,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    sx: {\n      color: 'text.secondary'\n    },\n    onClick: () => {/* TODO: 实现语音输入功能 */},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MicIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 890,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    sx: {\n      color: 'text.secondary'\n    },\n    onClick: handleSendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 892,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 896,\n      columnNumber: 15\n    }\n  }))))));\n};\nexport default Chat;","map":{"version":3,"names":["React","useState","useRef","useEffect","useParams","Box","Paper","TextField","IconButton","Typography","keyframes","createTheme","ThemeProvider","Collapse","CircularProgress","Menu","MenuItem","ListSubheader","Divider","Switch","Slider","Dialog","DialogTitle","DialogContent","DialogActions","Button","Send","SendIcon","Mic","MicIcon","MenuIcon","VolumeUp","VolumeUpIcon","ExpandMore","ExpandMoreIcon","ExpandLess","ExpandLessIcon","MusicNote","MusicNoteIcon","PlayArrow","PlayArrowIcon","Call","CallIcon","Person","PersonIcon","Image","ImageIcon","VolumeDown","VolumeDownIcon","darkTheme","palette","mode","background","default","paper","text","primary","secondary","bubbleAppear","Chat","characterId","showMessages","setShowMessages","isIntroExpanded","setIsIntroExpanded","isPlaying","setIsPlaying","isMusicEnabled","setIsMusicEnabled","characterInfo","id","name","avatar","introduction","backgroundStory","height","age","connections","openingMessage","content","sceneDescription","actionDescription","messages","setMessages","inputMessage","setInputMessage","isVoiceEnabled","setIsVoiceEnabled","messagesEndRef","characterImageRef","playingMessageId","setPlayingMessageId","messagesContainerRef","isNearBottom","setIsNearBottom","isUserScrolling","setIsUserScrolling","userScrollTimeoutRef","isVoicePlaying","setIsVoicePlaying","anchorEl","setAnchorEl","isSettingsOpen","setIsSettingsOpen","autoPlayVoice","setAutoPlayVoice","bgMusicVolume","setBgMusicVolume","userSettings","setUserSettings","nickname","gender","identity","isEditingUserSettings","setIsEditingUserSettings","tempUserSettings","setTempUserSettings","checkIfNearBottom","container","current","scrollHeight","scrollTop","clientHeight","distanceFromBottom","handleUserScroll","clearTimeout","setTimeout","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","addEventListener","removeEventListener","length","lastMessage","isVoiceLoading","sender","timestamp","Date","handleKeyPress","event","key","shiftKey","preventDefault","handleSendMessage","messageContent","trim","newMessage","now","prev","aiResponse","handlePlayVoice","messageId","currentMessage","find","msg","prevMessages","map","Promise","resolve","error","console","truncateText","maxLength","slice","handleMenuClick","currentTarget","handleMenuClose","handleOpenUserSettings","handleSaveUserSettings","handleVolumeChange","newValue","handleChangeBg","createElement","theme","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","sx","width","position","top","left","display","flexDirection","overflow","paddingBottom","p","alignItems","justifyContent","backdropFilter","bgcolor","gap","component","src","borderRadius","variant","color","toFixed","onClick","open","Boolean","onClose","PaperProps","minWidth","mr","my","checked","onChange","e","target","ml","mb","value","pt","label","fullWidth","helperText","borderColor","multiline","rows","flex","ref","overflowY","overflowX","scrollbarWidth","msOverflowStyle","px","py","in","maxWidth","transition","fontWeight","fontSize","fontStyle","size","right","bottom","message","xs","sm","boxShadow","Fragment","textAlign","disabled","thickness","pr","borderTop","zIndex","onSubmit","maxRows","onKeyPress","placeholder"],"sources":["C:/D/AI_role/Accompany_women/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {\n  Box,\n  Paper,\n  TextField,\n  IconButton,\n  Typography,\n  Tooltip,\n  keyframes,\n  createTheme,\n  ThemeProvider,\n  Collapse,\n  Zoom,\n  CircularProgress,\n  Menu,\n  MenuItem,\n  ListSubheader,\n  Divider,\n  Switch,\n  Slider,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  Mic as MicIcon,\n  Search as SearchIcon,\n  Menu as MenuIcon,\n  Add as AddIcon,\n  VolumeUp as VolumeUpIcon,\n  VolumeOff as VolumeOffIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  MusicNote as MusicNoteIcon,\n  ZoomIn as ZoomInIcon,\n  ZoomOut as ZoomOutIcon,\n  PlayArrow as PlayArrowIcon,\n  Call as CallIcon,\n  Person as PersonIcon,\n  Settings as SettingsIcon,\n  Image as ImageIcon,\n  VolumeDown as VolumeDownIcon,\n} from '@mui/icons-material';\n\n// 定义深色主题\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    background: {\n      default: '#000000',\n      paper: 'rgba(32, 32, 32, 0.8)',\n    },\n    text: {\n      primary: '#ffffff',\n      secondary: 'rgba(255, 255, 255, 0.7)',\n    },\n  },\n});\n\n// 定义气泡动画\nconst bubbleAppear = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\ninterface Message {\n  id: number;\n  content: string;\n  sceneDescription?: string;\n  actionDescription?: string;\n  sender: 'user' | 'character';\n  timestamp: Date;\n  isVoiceLoading?: boolean;\n}\n\ninterface CharacterInfo {\n  id: string;\n  name: string;\n  avatar: string;\n  introduction: string;\n  backgroundStory: string;\n  height: string;\n  age: number;\n  connections: number;\n  openingMessage: {\n    content: string;\n    sceneDescription?: string;\n    actionDescription?: string;\n  };\n}\n\nconst Chat: React.FC = () => {\n  const { characterId } = useParams<{ characterId: string }>();\n  const [showMessages, setShowMessages] = useState(true);\n  const [isIntroExpanded, setIsIntroExpanded] = useState(false);\n  const [isPlaying, setIsPlaying] = useState<number | null>(null);\n  const [isMusicEnabled, setIsMusicEnabled] = useState(true);\n  const [characterInfo] = useState<CharacterInfo>({\n    id: '1',\n    name: '罗峻雪',\n    avatar: '/images/characters/ceo.jpg',\n    introduction: '极为顽劣的财阀小少爷,少年细腰,雪发花眸,有一半的日耳曼血统,小名schlanke Schöne.(细腰美人)',\n    backgroundStory: '一度想把自己的名字改为罗素腰,但是被母亲强烈反对...',\n    height: '188cm',\n    age: 27,\n    connections: 794000,\n    openingMessage: {\n      content: '你这个可爱的小野猫',\n      sceneDescription: '（纸醉金迷,素手执杯,纸牌骰子,冰冷的珠宝映着富贵浮华的颜色,水蛇般的身躯慵懒倚靠）',\n      actionDescription: '（少年半靠在沙发里，身边簇拥着一群男生，有人喝酒有人递烟，他低着头把玩着长链手机，睫毛颤颤的，樱花色的薄唇被酒液浸润，透着一股无辜的艳色）',\n    }\n  });\n  \n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isVoiceEnabled, setIsVoiceEnabled] = useState(true);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const characterImageRef = useRef<HTMLImageElement>(null);\n  const [playingMessageId, setPlayingMessageId] = useState<number | null>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const [isNearBottom, setIsNearBottom] = useState(true);\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const userScrollTimeoutRef = useRef<NodeJS.Timeout>();\n  const [isVoicePlaying, setIsVoicePlaying] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [autoPlayVoice, setAutoPlayVoice] = useState(false);\n  const [bgMusicVolume, setBgMusicVolume] = useState(50);\n  const [userSettings, setUserSettings] = useState({\n    nickname: '小客人',\n    gender: '女',\n    identity: '普通访客'\n  });\n  const [isEditingUserSettings, setIsEditingUserSettings] = useState(false);\n  const [tempUserSettings, setTempUserSettings] = useState(userSettings);\n\n  const checkIfNearBottom = () => {\n    const container = messagesContainerRef.current;\n    if (container) {\n      const { scrollHeight, scrollTop, clientHeight } = container;\n      const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\n      setIsNearBottom(distanceFromBottom < 500);\n    }\n  };\n\n  const handleUserScroll = () => {\n    setIsUserScrolling(true);\n    \n    // Clear any existing timeout\n    if (userScrollTimeoutRef.current) {\n      clearTimeout(userScrollTimeoutRef.current);\n    }\n    \n    // Reset the user scrolling state after 150ms of no scroll events\n    userScrollTimeoutRef.current = setTimeout(() => {\n      setIsUserScrolling(false);\n    }, 150);\n    \n    checkIfNearBottom();\n  };\n\n  const scrollToBottom = () => {\n    // 只有在不是播放语音的情况下，且在底部500px范围内时才自动滚动\n    if (isNearBottom && !isVoicePlaying) {\n      messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    }\n  };\n\n  // 监听消息区域的滚动事件\n  useEffect(() => {\n    const container = messagesContainerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleUserScroll);\n      return () => {\n        container.removeEventListener('scroll', handleUserScroll);\n        if (userScrollTimeoutRef.current) {\n          clearTimeout(userScrollTimeoutRef.current);\n        }\n      };\n    }\n  }, []);\n\n  // 监听消息变化\n  useEffect(() => {\n    if (messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n      // 只在新消息（非语音状态更新）时检查是否需要滚动\n      if (!lastMessage.isVoiceLoading) {\n        scrollToBottom();\n      }\n    }\n  }, [messages, isNearBottom]);\n\n  useEffect(() => {\n    // Add opening message and example responses when component mounts\n    setMessages([\n      {\n        id: 1,\n        content: characterInfo.openingMessage.content,\n        sceneDescription: characterInfo.openingMessage.sceneDescription,\n        actionDescription: characterInfo.openingMessage.actionDescription,\n        sender: 'character',\n        timestamp: new Date(),\n      },\n      {\n        id: 2,\n        content: \"你好呀~\",\n        sender: 'user',\n        timestamp: new Date(),\n      },\n      {\n        id: 3,\n        content: \"哦？这不是我们可爱的小客人吗\",\n        sceneDescription: \"（抬起头来，露出一个慵懒而迷人的微笑，手指轻轻敲击着高脚杯）\",\n        actionDescription: \"（将手机放在一旁，示意身边的人群稍稍退开，为你留出一个位置）\",\n        sender: 'character',\n        timestamp: new Date(),\n      },\n      {\n        id: 4,\n        content: \"我可以坐在这里吗？\",\n        sender: 'user',\n        timestamp: new Date(),\n      },\n      {\n        id: 5,\n        content: \"当然可以，我可爱的小猫咪。这个位置，我可是特意为你留的呢\",\n        sceneDescription: \"（水晶吊灯的光芒在他银色的发丝间流转，映照出一片梦幻般的光晕）\",\n        actionDescription: \"（优雅地挪了挪位置，修长的手指轻拍身边的沙发座位，嘴角勾起一抹意味深长的笑）\",\n        sender: 'character',\n        timestamp: new Date(),\n      }\n    ]);\n  }, [characterInfo]);\n\n  const handleKeyPress = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handleSendMessage = () => {\n    const messageContent = inputMessage.trim() || \"继续\";\n    const newMessage = {\n      id: Date.now(),\n      content: messageContent,\n      sender: 'user' as const,\n      timestamp: new Date(),\n    };\n\n    // 发送新消息时，重置语音播放状态\n    setIsVoicePlaying(false);\n    setMessages(prev => [...prev, newMessage]);\n    setInputMessage('');\n\n    // 模拟AI回复\n    setTimeout(() => {\n      const aiResponse = {\n        id: Date.now(),\n        content: \"这是AI的回复消息\",\n        sender: 'character' as const,\n        timestamp: new Date(),\n        sceneDescription: \"（轻轻地笑了笑）\",\n        actionDescription: \"（优雅地端起酒杯，轻轻摇晃）\",\n      };\n      setMessages(prev => [...prev, aiResponse]);\n    }, 1000);\n  };\n\n  const handlePlayVoice = async (messageId: number) => {\n    // 设置正在播放语音状态，阻止自动滚动\n    setIsVoicePlaying(true);\n\n    // 如果正在播放这条消息，则取消播放\n    if (playingMessageId === messageId) {\n      setPlayingMessageId(null);\n      setIsVoicePlaying(false);\n      // TODO: 停止语音播放的逻辑\n      return;\n    }\n\n    // 如果这条消息正在加载中，不做任何操作\n    const currentMessage = messages.find(msg => msg.id === messageId);\n    if (currentMessage?.isVoiceLoading) {\n      return;\n    }\n\n    // 更新消息的加载状态\n    setMessages(prevMessages => \n      prevMessages.map(msg => \n        msg.id === messageId \n          ? { ...msg, isVoiceLoading: true }\n          : msg\n      )\n    );\n\n    try {\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { ...msg, isVoiceLoading: false }\n            : msg\n        )\n      );\n      setPlayingMessageId(messageId);\n\n      // 5秒后重置播放状态\n      setTimeout(() => {\n        setPlayingMessageId(null);\n        setIsVoicePlaying(false);\n      }, 5000);\n    } catch (error) {\n      console.error('语音合成失败:', error);\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId \n            ? { ...msg, isVoiceLoading: false }\n            : msg\n        )\n      );\n      setPlayingMessageId(null);\n      setIsVoicePlaying(false);\n    }\n  };\n\n  // 截断文本的函数\n  const truncateText = (text: string, maxLength: number) => {\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleOpenUserSettings = () => {\n    setTempUserSettings(userSettings);\n    setIsEditingUserSettings(true);\n    handleMenuClose();\n  };\n\n  const handleSaveUserSettings = () => {\n    setUserSettings(tempUserSettings);\n    setIsEditingUserSettings(false);\n  };\n\n  const handleVolumeChange = (event: Event, newValue: number | number[]) => {\n    setBgMusicVolume(newValue as number);\n  };\n\n  const handleChangeBg = () => {\n    // TODO: 实现更换背景图片功能\n    handleMenuClose();\n  };\n\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <Box\n        sx={{\n          height: '100vh',\n          width: '100%',\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n          paddingBottom: '56px', // 为底部导航栏预留空间\n        }}\n      >\n        {/* 顶部信息栏 */}\n        <Box\n          sx={{\n            p: 2,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            backdropFilter: 'blur(10px)',\n            bgcolor: 'rgba(0, 0, 0, 0.3)',\n          }}\n        >\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Box\n              component=\"img\"\n              src={characterInfo.avatar}\n              sx={{\n                width: 40,\n                height: 40,\n                borderRadius: '50%',\n              }}\n            />\n            <Box>\n              <Typography variant=\"subtitle1\">{characterInfo.name}</Typography>\n              <Typography variant=\"caption\" sx={{ color: 'text.secondary' }}>\n                {(characterInfo.connections / 10000).toFixed(1)}万 连接者\n              </Typography>\n            </Box>\n          </Box>\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            <IconButton onClick={() => setShowMessages(!showMessages)}>\n              {showMessages ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            </IconButton>\n            <IconButton \n              onClick={() => setIsMusicEnabled(!isMusicEnabled)}\n              sx={{\n                color: isMusicEnabled ? 'primary.main' : 'text.secondary',\n              }}\n            >\n              <MusicNoteIcon />\n            </IconButton>\n            <IconButton onClick={handleMenuClick}>\n              <MenuIcon />\n            </IconButton>\n          </Box>\n        </Box>\n\n        {/* 设置菜单 */}\n        <Menu\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={handleMenuClose}\n          PaperProps={{\n            sx: {\n              bgcolor: 'rgba(32, 32, 32, 0.95)',\n              backdropFilter: 'blur(10px)',\n              color: 'text.primary',\n              minWidth: 250,\n            }\n          }}\n        >\n          <ListSubheader sx={{ bgcolor: 'transparent', color: 'text.secondary' }}>\n            我的对话设定\n          </ListSubheader>\n          <MenuItem onClick={handleOpenUserSettings}>\n            <PersonIcon sx={{ mr: 1 }} />\n            <Typography>修改对话设定</Typography>\n          </MenuItem>\n          \n          <Divider sx={{ my: 1, bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n          \n          <ListSubheader sx={{ bgcolor: 'transparent', color: 'text.secondary' }}>\n            对话设置\n          </ListSubheader>\n          <MenuItem onClick={handleChangeBg}>\n            <ImageIcon sx={{ mr: 1 }} />\n            <Typography>更改背景图片</Typography>\n          </MenuItem>\n\n          <Divider sx={{ my: 1, bgcolor: 'rgba(255, 255, 255, 0.1)' }} />\n          \n          <ListSubheader sx={{ bgcolor: 'transparent', color: 'text.secondary' }}>\n            声音设置\n          </ListSubheader>\n          <MenuItem>\n            <Box sx={{ width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n              <Typography>自动播放对话语音</Typography>\n              <Switch\n                checked={autoPlayVoice}\n                onChange={(e) => setAutoPlayVoice(e.target.checked)}\n                sx={{ ml: 1 }}\n              />\n            </Box>\n          </MenuItem>\n          <MenuItem sx={{ flexDirection: 'column', alignItems: 'stretch' }}>\n            <Box sx={{ width: '100%', display: 'flex', alignItems: 'center', mb: 1 }}>\n              <VolumeDownIcon sx={{ mr: 1 }} />\n              <Typography>背景音乐音量</Typography>\n            </Box>\n            <Slider\n              value={bgMusicVolume}\n              onChange={handleVolumeChange}\n              aria-label=\"背景音乐音量\"\n              sx={{ width: '90%', ml: 1 }}\n            />\n          </MenuItem>\n        </Menu>\n\n        {/* 用户设置对话框 */}\n        <Dialog \n          open={isEditingUserSettings} \n          onClose={() => setIsEditingUserSettings(false)}\n          PaperProps={{\n            sx: {\n              bgcolor: 'rgba(32, 32, 32, 0.95)',\n              backdropFilter: 'blur(10px)',\n              color: 'text.primary',\n            }\n          }}\n        >\n          <DialogTitle>修改对话设定</DialogTitle>\n          <DialogContent>\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, pt: 1 }}>\n              <TextField\n                label=\"称呼\"\n                value={tempUserSettings.nickname}\n                onChange={(e) => setTempUserSettings(prev => ({ ...prev, nickname: e.target.value }))}\n                fullWidth\n                variant=\"outlined\"\n                helperText=\"他对我的称呼\"\n                sx={{\n                  '& .MuiOutlinedInput-root': {\n                    color: 'text.primary',\n                    '& fieldset': {\n                      borderColor: 'rgba(255, 255, 255, 0.23)',\n                    },\n                  },\n                  '& .MuiInputLabel-root': {\n                    color: 'text.secondary',\n                  },\n                  '& .MuiFormHelperText-root': {\n                    color: 'text.secondary',\n                  },\n                }}\n              />\n              <TextField\n                label=\"性别\"\n                value={tempUserSettings.gender}\n                onChange={(e) => setTempUserSettings(prev => ({ ...prev, gender: e.target.value }))}\n                fullWidth\n                variant=\"outlined\"\n                helperText=\"他对我的性别认知\"\n                sx={{\n                  '& .MuiOutlinedInput-root': {\n                    color: 'text.primary',\n                    '& fieldset': {\n                      borderColor: 'rgba(255, 255, 255, 0.23)',\n                    },\n                  },\n                  '& .MuiInputLabel-root': {\n                    color: 'text.secondary',\n                  },\n                  '& .MuiFormHelperText-root': {\n                    color: 'text.secondary',\n                  },\n                }}\n              />\n              <TextField\n                label=\"我是谁\"\n                value={tempUserSettings.identity}\n                onChange={(e) => setTempUserSettings(prev => ({ ...prev, identity: e.target.value }))}\n                fullWidth\n                variant=\"outlined\"\n                helperText=\"他对我的身份认知\"\n                multiline\n                rows={2}\n                sx={{\n                  '& .MuiOutlinedInput-root': {\n                    color: 'text.primary',\n                    '& fieldset': {\n                      borderColor: 'rgba(255, 255, 255, 0.23)',\n                    },\n                  },\n                  '& .MuiInputLabel-root': {\n                    color: 'text.secondary',\n                  },\n                  '& .MuiFormHelperText-root': {\n                    color: 'text.secondary',\n                  },\n                }}\n              />\n            </Box>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setIsEditingUserSettings(false)} sx={{ color: 'text.secondary' }}>\n              取消\n            </Button>\n            <Button onClick={handleSaveUserSettings} variant=\"contained\">\n              保存\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        {/* 空白填充区域 */}\n        <Box sx={{ flex: 1 }} />\n\n        {/* 消息区域 */}\n        <Box\n          ref={messagesContainerRef}\n          sx={{\n            height: '50vh',\n            overflowY: 'auto',\n            overflowX: 'hidden',\n            '&::-webkit-scrollbar': {\n              display: 'none',\n            },\n            scrollbarWidth: 'none',\n            msOverflowStyle: 'none',\n            px: 2,\n            py: 1,\n          }}\n        >\n          {/* 消息列表 - 可收起 */}\n          <Collapse in={showMessages}>\n            <Box\n              sx={{\n                height: '100%',\n                overflow: 'auto',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'flex-start',\n                px: 2,\n                py: 3,\n                gap: 3,\n              }}\n            >\n              {/* 角色简介卡片 */}\n              <Paper\n                sx={{\n                  p: 2,\n                  bgcolor: 'rgba(32, 32, 32, 0.75)',\n                  borderRadius: 2,\n                  backdropFilter: 'blur(10px)',\n                  width: '80%',\n                  maxWidth: '600px',\n                  position: 'relative',\n                }}\n              >\n                <Box \n                  sx={{ \n                    width: '95%',\n                    height: isIntroExpanded ? 'auto' : '4.8em',\n                    overflow: 'hidden',\n                    transition: 'height 0.3s ease',\n                  }}\n                >\n                  <Typography \n                    variant=\"body1\" \n                    sx={{ \n                      mb: 1,\n                      fontWeight: 'bold',\n                      color: 'text.primary',\n                    }}\n                  >\n                    简介\n                  </Typography>\n                  <Typography variant=\"body1\" sx={{ mb: 1 }}>\n                    {characterInfo.introduction}\n                  </Typography>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, color: 'text.secondary' }}>\n                    <MusicNoteIcon fontSize=\"small\" />\n                    <Typography variant=\"body2\" sx={{ fontStyle: 'italic' }}>\n                      {characterInfo.backgroundStory}\n                    </Typography>\n                  </Box>\n                </Box>\n                <IconButton \n                  size=\"small\"\n                  onClick={() => setIsIntroExpanded(!isIntroExpanded)}\n                  sx={{\n                    position: 'absolute',\n                    right: 8,\n                    bottom: 8,\n                    bgcolor: 'rgba(0, 0, 0, 0.2)',\n                    '&:hover': {\n                      bgcolor: 'rgba(0, 0, 0, 0.4)',\n                    },\n                  }}\n                >\n                  {isIntroExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </IconButton>\n              </Paper>\n\n              {messages.map((message) => (\n                <Box\n                  key={message.id}\n                  sx={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: message.sender === 'user' ? 'flex-end' : 'flex-start',\n                    width: '100%',\n                  }}\n                >\n                  <Box\n                    sx={{\n                      display: 'flex',\n                      alignItems: 'flex-end',\n                      gap: 1,\n                      ...(message.sender === 'user' \n                        ? {\n                            width: 'fit-content',\n                            maxWidth: {\n                              xs: '70%',\n                              sm: '65%',\n                            },\n                          }\n                        : {\n                            width: '80%',\n                            maxWidth: '600px',\n                          }\n                      ),\n                      ml: message.sender === 'user' ? 'auto' : 0,\n                      mr: message.sender === 'user' ? 0 : 'auto',\n                    }}\n                  >\n                    {message.sender === 'character' && (\n                      <Box sx={{ position: 'relative' }}>\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handlePlayVoice(message.id)}\n                          sx={{\n                            position: 'absolute',\n                            left: -40,\n                            bottom: 0,\n                            bgcolor: 'rgba(0, 0, 0, 0.2)',\n                            '&:hover': {\n                              bgcolor: 'rgba(0, 0, 0, 0.4)',\n                            },\n                          }}\n                        >\n                          <PlayArrowIcon fontSize=\"small\" />\n                          {isPlaying === message.id && (\n                            <Typography\n                              variant=\"caption\"\n                              sx={{\n                                position: 'absolute',\n                                left: -20,\n                                color: 'text.secondary',\n                              }}\n                            >\n                              3\"\n                            </Typography>\n                          )}\n                        </IconButton>\n                      </Box>\n                    )}\n                    <Paper\n                      sx={{\n                        p: 2,\n                        bgcolor: message.sender === 'user' ? 'rgba(245, 235, 224, 0.75)' : 'rgba(32, 32, 32, 0.75)',\n                        borderRadius: 2,\n                        backdropFilter: 'blur(10px)',\n                        boxShadow: '0 2px 12px rgba(0,0,0,0.1)',\n                        width: '100%',\n                        position: 'relative',\n                      }}\n                    >\n                      {message.sender === 'character' && (\n                        <>\n                          {message.sceneDescription && (\n                            <Typography\n                              variant=\"body2\"\n                              sx={{\n                                color: 'text.secondary',\n                                fontStyle: 'italic',\n                                mb: 1,\n                                width: '95%',\n                                textAlign: 'left',\n                              }}\n                            >\n                              {message.sceneDescription}\n                            </Typography>\n                          )}\n                          {message.actionDescription && (\n                            <Typography\n                              variant=\"body2\"\n                              sx={{\n                                color: 'text.secondary',\n                                fontStyle: 'italic',\n                                mb: 1,\n                                width: '95%',\n                                textAlign: 'left',\n                              }}\n                            >\n                              {message.actionDescription}\n                            </Typography>\n                          )}\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => handlePlayVoice(message.id)}\n                            disabled={message.isVoiceLoading}\n                            sx={{\n                              position: 'absolute',\n                              right: 8,\n                              top: 8,\n                              bgcolor: 'rgba(255, 255, 255, 0.1)',\n                              '&:hover': {\n                                bgcolor: 'rgba(255, 255, 255, 0.2)',\n                              },\n                            }}\n                          >\n                            {message.isVoiceLoading ? (\n                              <CircularProgress size={20} thickness={4} sx={{ color: 'rgba(255, 255, 255, 0.7)' }} />\n                            ) : (\n                              <VolumeUpIcon \n                                fontSize=\"small\" \n                                sx={{ \n                                  color: playingMessageId === message.id ? 'primary.main' : 'inherit'\n                                }} \n                              />\n                            )}\n                          </IconButton>\n                        </>\n                      )}\n                      <Typography \n                        variant=\"body1\" \n                        sx={{\n                          color: message.sender === 'user' ? '#333333' : 'text.primary',\n                          pr: message.sender === 'character' ? 4 : 0,\n                          textAlign: 'left',\n                          width: message.sender === 'character' ? '95%' : '100%',\n                          minWidth: message.sender === 'user' ? '4em' : 'auto',\n                        }}\n                      >\n                        {message.content}\n                      </Typography>\n                    </Paper>\n                  </Box>\n                </Box>\n              ))}\n              <div ref={messagesEndRef} />\n            </Box>\n          </Collapse>\n        </Box>\n\n        {/* 底部输入区域 */}\n        <Box\n          sx={{\n            p: 2,\n            width: '100%',\n            backdropFilter: 'blur(10px)',\n            bgcolor: 'rgba(0, 0, 0, 0.3)',\n            borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n            position: 'relative',\n            zIndex: 1200,\n          }}\n        >\n          <Box\n            component=\"form\"\n            onSubmit={(e) => {\n              e.preventDefault();\n              handleSendMessage();\n            }}\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1,\n              bgcolor: 'rgba(32, 32, 32, 0.5)',\n              borderRadius: 2,\n              p: 1,\n            }}\n          >\n            <IconButton \n              sx={{ color: 'text.secondary' }}\n              onClick={() => {/* TODO: 实现语音通话功能 */}}\n            >\n              <CallIcon />\n            </IconButton>\n            <TextField\n              fullWidth\n              multiline\n              maxRows={4}\n              value={inputMessage}\n              onChange={(e) => setInputMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"发送消息给温柔总裁\"\n              variant=\"standard\"\n              sx={{\n                '& .MuiInputBase-root': {\n                  color: 'text.primary',\n                  '&::before, &::after': {\n                    display: 'none',\n                  },\n                },\n                '& .MuiInputBase-input': {\n                  p: 1,\n                },\n              }}\n            />\n            <IconButton \n              sx={{ color: 'text.secondary' }}\n              onClick={() => {/* TODO: 实现语音输入功能 */}}\n            >\n              <MicIcon />\n            </IconButton>\n            <IconButton \n              sx={{ color: 'text.secondary' }}\n              onClick={handleSendMessage}\n            >\n              <SendIcon />\n            </IconButton>\n          </Box>\n        </Box>\n      </Box>\n    </ThemeProvider>\n  );\n};\n\nexport default Chat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}